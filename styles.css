:root {
  --bg-main: #0b1228; --bg-panel: #161e36;
  --text-main: #e2e8f0; --text-muted: #94a3b8;
  --accent: #22d3ee; --green: #22c55e; --red: #ef4444;
  --border: rgba(255, 255, 255, 0.08); --input-bg: rgba(0,0,0,0.2);
}
body.light-mode {
  --bg-main: #f0f2f5; --bg-panel: #ffffff;
  --text-main: #1a1d29; --text-muted: #64748b;
  --accent: #0284c7; --border: rgba(0, 0, 0, 0.08); --input-bg: #f1f5f9;
}
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { margin:0; padding:0; background:var(--bg-main); color:var(--text-main); font-family:system-ui, sans-serif; padding-bottom:90px; }

/* Header & Nav */
.app-header { position:sticky; top:0; z-index:100; background:var(--bg-panel); padding:1rem; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; }
.text-accent { color:var(--accent); }
.account-dropdown { background:var(--input-bg); border:1px solid var(--accent); color:var(--accent); padding:0.4rem; border-radius:8px; font-weight:bold; max-width:150px; }

.nav-tabs { display:flex; padding:0.5rem; gap:0.5rem; background:var(--bg-main); position:fixed; bottom:0; left:0; right:0; border-top:1px solid var(--border); z-index:90; }
.nav-tabs button { flex:1; background:transparent; border:none; color:var(--text-muted); padding:0.8rem; font-size:0.8rem; display:flex; flex-direction:column; align-items:center; gap:4px; }
.nav-tabs button.active { color:var(--accent); }

/* Layout */
main { padding:1rem; max-width:1000px; margin:0 auto; }
.tab-content { display:none; animation:fadeIn 0.3s ease; }
.tab-content.active { display:block; }
@keyframes fadeIn { from{opacity:0;transform:translateY(5px)} to{opacity:1;transform:translateY(0)} }

/* Cards */
.stats-grid { display:grid; grid-template-columns:1fr 1fr; gap:0.8rem; margin:1rem 0; }
.card { background:var(--bg-panel); border:1px solid var(--border); border-radius:12px; padding:1rem; margin-bottom:1rem; }
.card.wide { width:100%; }
.label { font-size:0.75rem; text-transform:uppercase; color:var(--text-muted); display:block; margin-bottom:0.2rem; }
.value { font-size:1.4rem; font-weight:700; }
.value.large { font-size:1.8rem; color:var(--text-main); }
.chart-container { height:220px; width:100%; }

/* Calendar - UPDATED */
.calendar-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; }
.calendar-grid { display:grid; grid-template-columns:repeat(7, 1fr); gap:6px; }

.cal-day { 
  min-height: 80px; 
  border-radius:6px; 
  background:var(--input-bg); 
  display:flex; 
  flex-direction:column; 
  justify-content: flex-start; /* Align to top */
  padding: 4px;
  position:relative; 
  overflow: hidden;
}

.cal-day.profit { background:rgba(34, 197, 94, 0.15); border:1px solid var(--green); }
.cal-day.loss { background:rgba(239, 68, 68, 0.15); border:1px solid var(--red); }

/* Big Date Number */
.cal-date-label { 
  font-size: 1.1rem; 
  font-weight: 800; 
  opacity: 0.8;
  text-align: right;
  width: 100%;
  margin-bottom: 4px;
}

/* Instrument Rows */
.cal-instrument-row {
  display: flex;
  justify-content: space-between;
  width: 100%;
  font-size: 0.65rem; /* Small font to fit */
  margin-bottom: 2px;
  line-height: 1.2;
}
.cal-instrument-name { font-weight: 600; color: var(--text-muted); }
.cal-instrument-pnl { font-weight: 700; }


/* Table */
.table-wrapper { overflow-x:auto; border-radius:8px; border:1px solid var(--border); }
.trade-table { width:100%; border-collapse:collapse; font-size:0.85rem; background:var(--bg-panel); }
.trade-table th { text-align:left; padding:0.8rem; color:var(--text-muted); border-bottom:1px solid var(--border); }
.trade-table td { padding:0.8rem; border-bottom:1px solid var(--border); }
.text-green { color:var(--green); } .text-red { color:var(--red); }

/* Forms */
.input-field { width:100%; background:var(--input-bg); border:1px solid var(--border); color:var(--text-main); padding:0.8rem; border-radius:8px; font-size:1rem; outline:none; }
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:0.5rem; margin-bottom:1rem; }
.form-group { margin-bottom:1rem; }
.add-account-box { display:flex; gap:0.5rem; margin-bottom:0.5rem; }

/* Buttons */
.btn { background:var(--accent); color:#fff; border:none; padding:0.8rem; border-radius:8px; font-weight:700; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; gap:6px; }
.btn.ghost { background:transparent; border:1px solid var(--border); color:var(--text-muted); }
.btn.danger { background:rgba(239,68,68,0.2); color:var(--red); border:1px solid var(--red); }
.btn.small { padding:0.4rem 0.8rem; font-size:0.85rem; }
.btn.full { width:100%; }

/* Modal */
.modal { position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:200; display:flex; align-items:center; justify-content:center; backdrop-filter:blur(3px); }
.modal.hidden { display:none; }
.modal-content { background:var(--bg-panel); width:90%; max-width:400px; padding:1.5rem; border-radius:12px; border:1px solid var(--border); position:relative; }
.close-modal { position:absolute; top:10px; right:15px; font-size:1.5rem; cursor:pointer; }
.modal-stats { display:flex; justify-content:space-between; background:var(--input-bg); padding:1rem; border-radius:8px; margin:1rem 0; }
#mImgContainer img { max-width:100%; border-radius:8px; margin-bottom:1rem; border:1px solid var(--border); }

.switch { position:relative; display:inline-block; width:40px; height:24px; }
.switch input { opacity:0; width:0; height:0; }
.slider { position:absolute; inset:0; background:#ccc; transition:.4s; border-radius:34px; }
.slider:before { position:absolute; content:""; height:16px; width:16px; left:4px; bottom:4px; background:white; transition:.4s; border-radius:50%; }
input:checked + .slider { background:var(--accent); }
input:checked + .slider:before { transform:translateX(16px); }
.setting-row { display:flex; justify-content:space-between; align-items:center; padding:0.5rem 0; }
.settings-list { list-style:none; padding:0; }
.settings-list li { display:flex; justify-content:space-between; padding:0.8rem 0; border-bottom:1px solid var(--border); }

.toast { position:fixed; bottom:90px; left:50%; transform:translateX(-50%); background:var(--accent); color:#fff; padding:10px 24px; border-radius:50px; font-weight:bold; opacity:0; pointer-events:none; transition:opacity 0.3s; z-index:300; }